---
id: KYCRegistrar
title: KYCRegistrar
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> KYCRegistrar</h2><div class="source">Source: <a href="git+https://github.com/SFT-Protocol/security-token/blob/v0.11.2/contracts/KYCRegistrar.sol" target="_blank">KYCRegistrar.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="KYCRegistrar.html#AuthorityRestriction">AuthorityRestriction</a></li><li><a href="KYCRegistrar.html#InvestorRestriction">InvestorRestriction</a></li><li><a href="KYCRegistrar.html#NewAuthority">NewAuthority</a></li><li><a href="KYCRegistrar.html#NewInvestor">NewInvestor</a></li><li><a href="KYCRegistrar.html#RegisteredAddresses">RegisteredAddresses</a></li><li><a href="KYCRegistrar.html#RestrictedAddresses">RestrictedAddresses</a></li><li><a href="KYCRegistrar.html#UpdatedInvestor">UpdatedInvestor</a></li><li><a href="KYCRegistrar.html#_addAddresses">_addAddresses</a></li><li><a href="KYCRegistrar.html#_authorityCheck">_authorityCheck</a></li><li><a href="KYCRegistrar.html#_checkMultiSig">_checkMultiSig</a></li><li><a href="KYCRegistrar.html#addAuthority">addAuthority</a></li><li><a href="KYCRegistrar.html#addInvestor">addInvestor</a></li><li><a href="KYCRegistrar.html#">fallback</a></li><li><a href="KYCRegistrar.html#generateID">generateID</a></li><li><a href="KYCRegistrar.html#getCountry">getCountry</a></li><li><a href="KYCRegistrar.html#getExpires">getExpires</a></li><li><a href="KYCRegistrar.html#getID">getID</a></li><li><a href="KYCRegistrar.html#getInvestor">getInvestor</a></li><li><a href="KYCRegistrar.html#getInvestors">getInvestors</a></li><li><a href="KYCRegistrar.html#getRating">getRating</a></li><li><a href="KYCRegistrar.html#getRegion">getRegion</a></li><li><a href="KYCRegistrar.html#isPermitted">isPermitted</a></li><li><a href="KYCRegistrar.html#onlyAuthority">onlyAuthority</a></li><li><a href="KYCRegistrar.html#onlyOwner">onlyOwner</a></li><li><a href="KYCRegistrar.html#registerAddresses">registerAddresses</a></li><li><a href="KYCRegistrar.html#restrictAddresses">restrictAddresses</a></li><li><a href="KYCRegistrar.html#setAuthorityCountries">setAuthorityCountries</a></li><li><a href="KYCRegistrar.html#setAuthorityRestriction">setAuthorityRestriction</a></li><li><a href="KYCRegistrar.html#setAuthorityThreshold">setAuthorityThreshold</a></li><li><a href="KYCRegistrar.html#setInvestorAuthority">setInvestorAuthority</a></li><li><a href="KYCRegistrar.html#setInvestorRestriction">setInvestorRestriction</a></li><li><a href="KYCRegistrar.html#updateInvestor">updateInvestor</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="AuthorityRestriction" class="anchor-marker"></span><h4 class="name">AuthorityRestriction</h4><div class="body"><code class="signature">event <strong>AuthorityRestriction</strong><span>(bytes32 id, bool permitted) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>permitted</code> - bool</div></dd></dl></div></div></li><li><div class="item event"><span id="InvestorRestriction" class="anchor-marker"></span><h4 class="name">InvestorRestriction</h4><div class="body"><code class="signature">event <strong>InvestorRestriction</strong><span>(bytes32 id, bool restricted, bytes32 authority) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>restricted</code> - bool</div><div><code>authority</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="NewAuthority" class="anchor-marker"></span><h4 class="name">NewAuthority</h4><div class="body"><code class="signature">event <strong>NewAuthority</strong><span>(bytes32 id) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="NewInvestor" class="anchor-marker"></span><h4 class="name">NewInvestor</h4><div class="body"><code class="signature">event <strong>NewInvestor</strong><span>(bytes32 id, uint16 country, bytes3 region, uint8 rating, uint40 expires, bytes32 authority) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>country</code> - uint16</div><div><code>region</code> - bytes3</div><div><code>rating</code> - uint8</div><div><code>expires</code> - uint40</div><div><code>authority</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="RegisteredAddresses" class="anchor-marker"></span><h4 class="name">RegisteredAddresses</h4><div class="body"><code class="signature">event <strong>RegisteredAddresses</strong><span>(bytes32 id, address[] addr, bytes32 authority) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>addr</code> - address[]</div><div><code>authority</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="RestrictedAddresses" class="anchor-marker"></span><h4 class="name">RestrictedAddresses</h4><div class="body"><code class="signature">event <strong>RestrictedAddresses</strong><span>(bytes32 id, address[] addr, bytes32 authority) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>addr</code> - address[]</div><div><code>authority</code> - bytes32</div></dd></dl></div></div></li><li><div class="item event"><span id="UpdatedInvestor" class="anchor-marker"></span><h4 class="name">UpdatedInvestor</h4><div class="body"><code class="signature">event <strong>UpdatedInvestor</strong><span>(bytes32 id, bytes3 region, uint8 rating, uint40 expires, bytes32 authority) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>id</code> - bytes32</div><div><code>region</code> - bytes3</div><div><code>rating</code> - uint8</div><div><code>expires</code> - uint40</div><div><code>authority</code> - bytes32</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="onlyAuthority" class="anchor-marker"></span><h4 class="name">onlyAuthority</h4><div class="body"><code class="signature">modifier <strong>onlyAuthority</strong><span>(bytes32 _id) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - ID of investor that the authority is modifying</div></dd></dl></div></div></li><li><div class="item modifier"><span id="onlyOwner" class="anchor-marker"></span><h4 class="name">onlyOwner</h4><div class="body"><code class="signature">modifier <strong>onlyOwner</strong><span>() </span></code><hr/><div class="description"><p>Checks that the calling address is associated with the owner.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="_addAddresses" class="anchor-marker"></span><h4 class="name">_addAddresses</h4><div class="body"><code class="signature">function <strong>_addAddresses</strong><span>(bytes32 _id, address[] _addr) </span><span>internal </span></code><hr/><div class="description"><p>Internal function to add new addresses.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - investor or authority ID</div><div><code>_addr</code> - array of addresses</div></dd></dl></div></div></li><li><div class="item function"><span id="_authorityCheck" class="anchor-marker"></span><h4 class="name">_authorityCheck</h4><div class="body"><code class="signature">function <strong>_authorityCheck</strong><span>(uint16 _country) </span><span>internal </span><span>view </span></code><hr/><div class="description"><p>Verifyies authority permission based on country.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_country</code> - Country relating to the authority&#x27;s action</div></dd></dl></div></div></li><li><div class="item function"><span id="_checkMultiSig" class="anchor-marker"></span><h4 class="name">_checkMultiSig</h4><div class="body"><code class="signature">function <strong>_checkMultiSig</strong><span>() </span><span>internal </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Internal multisig functionality.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>bool - has call met multisig threshold?</dd></dl></div></div></li><li><div class="item function"><span id="addAuthority" class="anchor-marker"></span><h4 class="name">addAuthority</h4><div class="body"><code class="signature">function <strong>addAuthority</strong><span>(address[] _addr, uint16[] _countries, uint8 _threshold) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Add a new authority to this registrar.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - Array of addressses to register as authority</div><div><code>_countries</code> - uint16[]</div><div><code>_threshold</code> - Minimum number of calls to a method for multisigk</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="addInvestor" class="anchor-marker"></span><h4 class="name">addInvestor</h4><div class="body"><code class="signature">function <strong>addInvestor</strong><span>(bytes32 _id, uint16 _country, bytes3 _region, uint8 _rating, uint40 _expires, address[] _addr) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Add investor to this registrar.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div><div><code>_country</code> - Investor country code</div><div><code>_region</code> - Investor region code</div><div><code>_rating</code> - Investor rating (accreditted, qualified, etc)</div><div><code>_expires</code> - Registry expiration in epoch time</div><div><code>_addr</code> - Array of addresses to register to investor</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address[] _owners, uint8 _threshold) </span><span>public </span></code><hr/><div class="description"><p>KYC registrar constructor.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_owners</code> - Array of addresses for owning authority</div><div><code>_threshold</code> - multisig threshold for owning authority</div></dd></dl></div></div></li><li><div class="item function"><span id="generateID" class="anchor-marker"></span><h4 class="name">generateID</h4><div class="body"><code class="signature">function <strong>generateID</strong><span>(string _idString) </span><span>external </span><span>pure </span><span>returns  (bytes32) </span></code><hr/><div class="description"><p>Https://github.com/iamdefinitelyahuman/security-token/tree/master/docs/codes/investor-id.md, Generate a unique investor ID.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_idString</code> - ID string to generate hash from</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32 investor ID hash</dd></dl></div></div></li><li><div class="item function"><span id="getCountry" class="anchor-marker"></span><h4 class="name">getCountry</h4><div class="body"><code class="signature">function <strong>getCountry</strong><span>(bytes32 _id) </span><span>external </span><span>view </span><span>returns  (uint16) </span></code><hr/><div class="description"><p>Fetch investor country from an ID.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div></dd><dt><span class="label-return">Returns:</span></dt><dd>string</dd></dl></div></div></li><li><div class="item function"><span id="getExpires" class="anchor-marker"></span><h4 class="name">getExpires</h4><div class="body"><code class="signature">function <strong>getExpires</strong><span>(bytes32 _id) </span><span>external </span><span>view </span><span>returns  (uint40) </span></code><hr/><div class="description"><p>Fetch investor KYC expiration from an ID.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint40 expiration epoch time</dd></dl></div></div></li><li><div class="item function"><span id="getID" class="anchor-marker"></span><h4 class="name">getID</h4><div class="body"><code class="signature">function <strong>getID</strong><span>(address _addr) </span><span>external </span><span>view </span><span>returns  (bytes32) </span></code><hr/><div class="description"><p>Fetch investor ID from an address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - Address to query</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32 investor ID</dd></dl></div></div></li><li><div class="item function"><span id="getInvestor" class="anchor-marker"></span><h4 class="name">getInvestor</h4><div class="body"><code class="signature">function <strong>getInvestor</strong><span>(address _addr) </span><span>external </span><span>view </span><span>returns  (bytes32, bool, uint8, uint16) </span></code><hr/><div class="description"><p>Fetch investor information using an address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - Address to query</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint16 investor country code</dd></dl></div></div></li><li><div class="item function"><span id="getInvestors" class="anchor-marker"></span><h4 class="name">getInvestors</h4><div class="body"><code class="signature">function <strong>getInvestors</strong><span>(address _from, address _to) </span><span>external </span><span>view </span><span>returns  (bytes32[], bool[], uint8[], uint16[]) </span></code><hr/><div class="description"><p>Use addresses to fetch information on 2 investors.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - first address to query</div><div><code>_to</code> - second address to query</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint16 array of investor country codes</dd></dl></div></div></li><li><div class="item function"><span id="getRating" class="anchor-marker"></span><h4 class="name">getRating</h4><div class="body"><code class="signature">function <strong>getRating</strong><span>(bytes32 _id) </span><span>external </span><span>view </span><span>returns  (uint8) </span></code><hr/><div class="description"><p>Fetch investor rating from an ID.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div></dd><dt><span class="label-return">Returns:</span></dt><dd>uint8 rating code</dd></dl></div></div></li><li><div class="item function"><span id="getRegion" class="anchor-marker"></span><h4 class="name">getRegion</h4><div class="body"><code class="signature">function <strong>getRegion</strong><span>(bytes32 _id) </span><span>external </span><span>view </span><span>returns  (bytes3) </span></code><hr/><div class="description"><p>Fetch investor region from an ID.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes3 region code</dd></dl></div></div></li><li><div class="item function"><span id="isPermitted" class="anchor-marker"></span><h4 class="name">isPermitted</h4><div class="body"><code class="signature">function <strong>isPermitted</strong><span>(address _addr) </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Check if an an investor and address are permitted.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_addr</code> - Address to query</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool permission</dd></dl></div></div></li><li><div class="item function"><span id="registerAddresses" class="anchor-marker"></span><h4 class="name">registerAddresses</h4><div class="body"><code class="signature">function <strong>registerAddresses</strong><span>(bytes32 _id, address[] _addr) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Register addresseses to an entity.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Entity&#x27;s ID</div><div><code>_addr</code> - Array of addresses</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="restrictAddresses" class="anchor-marker"></span><h4 class="name">restrictAddresses</h4><div class="body"><code class="signature">function <strong>restrictAddresses</strong><span>(bytes32 _id, address[] _addr) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Flags addresses as restricted instead of removing them.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Entity ID</div><div><code>_addr</code> - Array of addresses</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="setAuthorityCountries" class="anchor-marker"></span><h4 class="name">setAuthorityCountries</h4><div class="body"><code class="signature">function <strong>setAuthorityCountries</strong><span>(bytes32 _id, uint16[] _countries, bool _auth) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Sets approval of an authority to register entities in a country.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Authority ID</div><div><code>_countries</code> - Array of country IDs</div><div><code>_auth</code> - boolean to set or restrict countries</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool succcess</dd></dl></div></div></li><li><div class="item function"><span id="setAuthorityRestriction" class="anchor-marker"></span><h4 class="name">setAuthorityRestriction</h4><div class="body"><code class="signature">function <strong>setAuthorityRestriction</strong><span>(bytes32 _id, bool _permitted) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Set or remove an authority&#x27;s restricted status.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Authority ID</div><div><code>_permitted</code> - Permission bool</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="setAuthorityThreshold" class="anchor-marker"></span><h4 class="name">setAuthorityThreshold</h4><div class="body"><code class="signature">function <strong>setAuthorityThreshold</strong><span>(bytes32 _id, uint8 _threshold) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Modifies the number of calls needed by a multisig authority.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Authority ID</div><div><code>_threshold</code> - Minimum number of calls to a method for multisig</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="setInvestorAuthority" class="anchor-marker"></span><h4 class="name">setInvestorAuthority</h4><div class="body"><code class="signature">function <strong>setInvestorAuthority</strong><span>(bytes32[] _id, bytes32 _authID) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Modify an investor&#x27;s registering authority.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div><div><code>_authID</code> - Authority ID</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="setInvestorRestriction" class="anchor-marker"></span><h4 class="name">setInvestorRestriction</h4><div class="body"><code class="signature">function <strong>setInvestorRestriction</strong><span>(bytes32 _id, bool _permitted) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>This modifies restriciton on all addresses attached to the ID, Set or remove an investor&#x27;s restricted status.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyAuthority">onlyAuthority </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div><div><code>_permitted</code> - Permission bool</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li><li><div class="item function"><span id="updateInvestor" class="anchor-marker"></span><h4 class="name">updateInvestor</h4><div class="body"><code class="signature">function <strong>updateInvestor</strong><span>(bytes32 _id, bytes3 _region, uint8 _rating, uint40 _expires) </span><span>external </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Investor country may not be changed as this will alter their ID, Update an investor.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="KYCRegistrar.html#onlyAuthority">onlyAuthority </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_id</code> - Investor ID</div><div><code>_region</code> - Investor region</div><div><code>_rating</code> - Investor rating</div><div><code>_expires</code> - Registry expiration in epoch time</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool success</dd></dl></div></div></li></ul></div></div></div>
